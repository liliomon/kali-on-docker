version: '3.8'

services:
  kali-gui:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        USERNAME: kaliuser
        USER_UID: 1000
        USER_GID: 1000
    image: kali-gui:latest
    container_name: kali-gui-container
    hostname: kali-docker
    ports:
      - "5901:5901"  # Puerto VNC
    volumes:
      - kali-home:/home/kaliuser
      - kali-root:/root
    environment:
      - DISPLAY=:1
      - VNC_RESOLUTION=1920x1080
    restart: unless-stopped
    stdin_open: true
    tty: true
    networks:
      - kali-network

volumes:
  kali-home:
    driver: local
  kali-root:
    driver: local

networks:
  kali-network:
    driver: bridge
